/*
*
* This program calculates the AVERAGE, MINIMUM and MAXIMUM values from the array using the concepts of thread. All three respective 
* values are returned to the main and get printed over there.
*
*/


#include<stdio.h>
#include<unistd.h>
#include<pthread.h>
#include<stdlib.h>
#include<sys/wait.h>

int n;

void *findAvg(void *arr){
  int *a = (int *)arr;
  float sum = 0;
  int i;
  for( i = 0; i < n; i++){
    sum += *(a+i);
  }
  float avg = sum/n;
  void *x = NULL;
  x = &avg;
  pthread_exit((void *)x);
}

void *findMin(void *arr){
  int *a = (int *)arr;
  int min = *a;
  int i;
  for( i = 1; i < n; i++){
    if(*(a+i) < min)
      min  = *(a+i);
  }
  void *x = NULL;
  x = &min;
  pthread_exit((void *)x);
}

void *findMax(void *arr){
  int *a = (int *)arr;
    int max = *a;
    int i;
    for( i = 1; i < n; i++){
      if(*(a+i) > max)
        max  = *(a+i);
    }
    void *x  = NULL;
    x = &max;
    pthread_exit((void *)x);
}

// MAIN METHOD
int main(){
  pthread_t th1,th2,th3;
  printf("Enter number of elements : ");
  scanf("%d",&n);
  
  int arr[n], i;
  for(i = 0; i < n; i++)
      scanf("%d",&arr[i]);

  pthread_create(&th1,NULL,findAvg,&arr);
  pthread_create(&th2,NULL,findMin,&arr);
  pthread_create(&th3,NULL,findMax,&arr);
  
  void *a = NULL;
  void *b = NULL;
  void *c = NULL;
  
  pthread_join(th1,&a);
  pthread_join(th2,&b);
  pthread_join(th3,&c);
  
  printf("Average value of the array is : %f", (float)a);
  printf("Minimum value of the array is : %d", (int)b);
  printf("Maximum value of the array is : %d", (int)c);
  exit(0);
}
